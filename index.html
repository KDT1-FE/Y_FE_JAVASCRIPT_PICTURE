<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/styles/general.css" />
    <link rel="stylesheet" href="/styles/theme.css" />
    <link rel="stylesheet" href="/styles/main.css" />
    <link rel="stylesheet" href="/styles/header.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR:wght@200;300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <script src="https://sdk.amazonaws.com/js/aws-sdk-2.1433.0.min.js"></script>
  </head>
  <body>
    <header class="header">
      <a id="header-title" href="/">TK company MemberDB</a>
    </header>
    <main id="home">
      <h1 class="title text-xl">우리 회사 직원들</h1>
      <div class="control-container">
        <div class="control-container_button-container">
          <button class="text-m" id="open-enroll-form">등록</button>
        </div>
      </div>

      <div id="modal">
        <form class="enroll-form bg-main150">
          <div class="enroll-form__container">
            <div class="enroll-form__photoBox bg-gray">
              <img id="preview" src="/assets/img/profile.jpeg" />
              <label class="photo-input__label" for="photo-input"
                >Upload Image</label
              >
              <input id="photo-input" type="file" />
            </div>
            <div class="enroll-form__inputBox">
              <label for="name-input">이름</label>
              <input id="name-input" />
              <label for="email-input">이메일</label>
              <input id="email-input" />
              <label for="phoneNum-input">전화번호</label>
              <input id="phoneNum-input" />
              <label for="position-input">포지션</label>
              <input id="position-input" />
              <button class="enroll-form__submit bg-blue text-s" type="submit">
                submit
              </button>
              <button class="enroll-form__cancel bg-pink text-s">cancel</button>
            </div>
          </div>
        </form>
      </div>

      <div class="member-info">
        <div class="member-info__header bg-main100">
          <div class="member-info__img">사진</div>
          <div class="member-info__name">이름</div>
          <div class="member-info__phoneNum">전화번호</div>
          <div class="member-info__email">이메일</div>
          <div class="member-info__position">포지션</div>
        </div>
      </div>
    </main>
    <script type="module" src="js/config/aws.js"></script>
    <script type="module" src="/js/constant/home.js"></script>
    <script type="module" src="/js/api/uploadProfile.js"></script>
    <script type="module" src="/js/api/listProfile.js"></script>
    <script type="module">
      import {
        btn_openEnrollForm,
        enrollForm,
        btn_addProfile,
        btn_closeEnrollForm,
        enroll_photo,
      } from "/js/constant/home.js";

      import { uploadProfileToS3 } from "/js/api/uploadProfile.js";
      import { listProfileFromS3 } from "/js/api/listProfile.js";

      btn_openEnrollForm.addEventListener("click", openForm); // 프로필 등록 폼 열기
      btn_closeEnrollForm.addEventListener("click", closeForm); // 프로필 등록 폼 닫기
      enroll_photo.addEventListener("change", previewImg); // 이미지 프리뷰

      listProfileFromS3(); // 프로필 불러오기 (Read)
      btn_addProfile.addEventListener("click", uploadProfileToS3); // s3로 프로필업로드

      function previewImg() {
        const imageSrc = URL.createObjectURL(enroll_photo.files[0]);
        document.getElementById("preview").src = imageSrc;
      }

      function openForm(e) {
        e.preventDefault();
        const modal = document.querySelector("#modal");
        modal.style.visibility = "visible";
      }

      function closeForm(e) {
        e.preventDefault();
        const modal = document.querySelector("#modal");
        modal.style.visibility = "hidden";
      }

      const photo = enroll_photo.files[0];
    </script>
  </body>
</html>
